(function(){window.BigBrainTrackerVersion=1,window.BigBrainJQueryPolyfill={extend:function(t,i){for(var e in i)i.hasOwnProperty(e)&&(t[e]=i[e]);return t},ajax:function(t,i){function e(t,i){var r,s=[];for(r in t)if(t.hasOwnProperty(r)){var _=i?i+"["+r+"]":r,o=t[r];s.push(null!==o&&"object"==typeof o?e(o,_):encodeURIComponent(_)+"="+encodeURIComponent(o))}return s.join("&")}var r=new XMLHttpRequest;return r.open(i.type,t),r.setRequestHeader("Content-Type",i.contentType||"application/x-www-form-urlencoded"),r.onload=function(){r.status>=200&&r.status<300?i.success&&i.success(JSON.parse(r.responseText)):i.error&&i.error(JSON.parse(r.responseText)),i.complete&&i.complete()},r.onerror=function(){try{i.error&&i.error()}catch(t){}try{i.complete&&i.complete()}catch(t){}},"object"==typeof i.data?r.send(e(i.data)):r.send(i.data),r},get:function(t,i){return BigBrainJQueryPolyfill.ajax(t,{type:"get",success:i,contentType:"application/json"})}},window.bb_cookie={get:function(t){for(var i=t+"=",e=document.cookie.split(";"),r=0;r<e.length;r++){for(var s=e[r];" "==s.charAt(0);)s=s.substring(1,s.length);if(0==s.indexOf(i))return decodeURIComponent(s.substring(i.length,s.length))}return null},parse:function(t){var i;try{i=_.JSONDecode(_.cookie.get(t))||{}}catch(t){}return i},set:function(t,i,e,r,s,_){var o="",n="",a="";if(s||r){var u=document.location.hostname.match(/[a-z0-9][a-z0-9\-]+\.[a-z\.]{2,6}$/i),p=u?u[0]:"";o=p?"; domain=."+p:""}if(s&&(o+="; samesite=None",_=!0),e){var h=new Date;h.setTime(h.getTime()+24*e*60*60*1e3),n="; expires="+h.toGMTString()}_&&(a="; secure"),document.cookie=t+"="+encodeURIComponent(i)+n+"; path=/"+o+a},remove:function(t,i,e){window.bb_cookie.set(t,"",-1,i,e)}};var t,i,e,r,s,o=function(t,i){return function(){return t.apply(i,arguments)}},n=[].indexOf||function(t){for(var i=0,e=this.length;i<e;i++)if(i in this&&this[i]===t)return i;return-1};e=function(t,i){this.storage=i,this.name=t,this.length=function(t){return function(){return t.get_elements().length}}(this),this.is_empty=function(t){return function(){return 0===t.length()}}(this),this.get_elements=function(t){return function(){var i,e;i=t.storage.getItem(t.name);try{return null==i||""===i?[]:JSON.parse(i)}catch(t){throw e=t,"BigBrain tracker - Error get_elements: "+e.message+" ("+i+")"}}}(this),this.queue=function(t){return function(i){var e;return e=t.get_elements(),e.push(i),t.storage.setItem(t.name,JSON.stringify(e))}}(this),this.queue_batch=function(t){return function(i){var e,r,s,_;for(e=t.get_elements(),r=s=0,_=i.length-1;s<=_;r=s+=1)e.push(i[r]);return t.storage.setItem(t.name,JSON.stringify(e))}}(this),this.empty=function(t){return function(){var i;return i=[],t.storage.setItem(t.name,JSON.stringify(i))}}(this),this.dequeue_all=function(t){return function(){return t.dequeue(t.length())}}(this),this.dequeue=function(t){return function(i){var e,r;return null==i&&(i=1),e=t.get_elements(),0===e.length?[]:(i=Math.min(e.length,i),r=e.splice(0,i),t.storage.setItem(t.name,JSON.stringify(e)),r)}}(this)},window.queue=e,i=function(){function t(){this.getItem=o(this.getItem,this),this.setItem=o(this.setItem,this),this.memory={}}return t.prototype.setItem=function(t,i){return this.memory[t]=i},t.prototype.getItem=function(t){return this.memory[t]},t}(),window.memoryStorage=i,r=function(){var t,i,e,r;return i=function(){var t,i;for(t=1*new Date,i=0;t===1*new Date;)i+=1;return t.toString(16)+i.toString(16)},t=function(){return Math.random().toString(16).replace(".","")},e=function(){var t,i,e,r,s,_,o,n;for(o=navigator.userAgent,t=[],_=0,n=function(){return function(i,e){var r,s,_,o;for(o=0,r=s=0,_=e.length;0<=_?s<_:s>_;r=0<=_?++s:--s)o|=t[r]<<8*r;return i^o}}(),e=r=0,s=o.length;0<=s?r<s:r>s;e=0<=s?++r:--r)i=o.charCodeAt(e),t.unshift(255&i),t.length>=4&&(_=n(_,t),t=[]);return t.length>0&&(_=n(_,t)),_.toString(16)},r=(screen.height*screen.width).toString(16),i()+t()+e()+r+i()},window.BB_UUID=r,s={slug:null,sync_interval:5e3,get_visitor_id_timeout:5e3,batch_size:100,alias_timeout:5e3,methods_interval:1e3,send_immediately:!1,create_visitor:!0,cookies_enabled:!0,gradual_release:!0,gradual_release_distribution:10,is_tracker_cross_domain:!1,emit_visitor_id:!1,emit_target_origin:""},t=function(){function t(t){var i,e,r,_,n,a,u,p;null==t&&(t={}),this._add_fullStory_to_data_properties=o(this._add_fullStory_to_data_properties,this),this._add_to_properties_data=o(this._add_to_properties_data,this),this._has_slug=o(this._has_slug,this),this._is_selected_for_gradual_release=o(this._is_selected_for_gradual_release,this),this._is_local_storage_supported=o(this._is_local_storage_supported,this),this._is_spider=o(this._is_spider,this),this._get_brand=o(this._get_brand,this),this._is_iOS_device=o(this._is_iOS_device,this),this._is_android_device=o(this._is_android_device,this),this._merge_event_params=o(this._merge_event_params,this),this._log=o(this._log,this),this._tracker_state=o(this._tracker_state,this),this._init_mobile_app_properties=o(this._init_mobile_app_properties,this),this._get_referrer=o(this._get_referrer,this),this._get_experiment_id=o(this._get_experiment_id,this),this._init_propeties=o(this._init_propeties,this),this._alias=o(this._alias,this),this.set_property=o(this.set_property,this),this.set_utm_locale_id=o(this.set_utm_locale_id,this),this.set_utm_cluster_id=o(this.set_utm_cluster_id,this),this.set_user_id=o(this.set_user_id,this),this.set_account_id=o(this.set_account_id,this),this._fire_new_visit_event=o(this._fire_new_visit_event,this),this._fire_tag_manager_visitor_ready=o(this._fire_tag_manager_visitor_ready,this),this._has_no_visitor_id=o(this._has_no_visitor_id,this),this._has_no_ids=o(this._has_no_ids,this),this._get_visitor_id=o(this._get_visitor_id,this),this._get_cookie=o(this._get_cookie,this),this._set_cookie=o(this._set_cookie,this),this._update_visitor_ip_info=o(this._update_visitor_ip_info,this),this._update_visitor_person_id=o(this._update_visitor_person_id,this),this._update_visitor_utm_locale_id=o(this._update_visitor_utm_locale_id,this),this._update_visitor_utm_cluster_id=o(this._update_visitor_utm_cluster_id,this),this._get_ip_info=o(this._get_ip_info,this),this._get_ip_info_from_cookies=o(this._get_ip_info_from_cookies,this),this._get_nav_type=o(this._get_nav_type,this),this._get_timezone_offset=o(this._get_timezone_offset,this),this._get_initial_queue=o(this._get_initial_queue,this),this._remove_sent_events_from_queue=o(this._remove_sent_events_from_queue,this),this._work=o(this._work,this),this._skip_event=o(this._skip_event,this),this._raise_js_event=o(this._raise_js_event,this),this.track=o(this.track,this),this.track_many=o(this.track_many,this),this._process_data=o(this._process_data,this),this._send=o(this._send,this),this.send_all=o(this.send_all,this),this._init_ids=o(this._init_ids,this),this._emit_visitor_id=o(this._emit_visitor_id,this),this._send_hubspot_id=o(this._send_hubspot_id,this),this._send_facebook_id=o(this._send_facebook_id,this),this._execute=o(this._execute,this);try{if(this._is_spider())return function(){};for(this.VISITOR_ID_KEY="bb_visitor_id",this.EXPERIMENT_VISITOR_ID_KEY="experiment_visitor_id",this.PULSE_ACCOUNT_ID_KEY="bb_pulse_account_id",this.PULSE_USER_ID_KEY="bb_pulse_user_id",this.ALIASED_KEY="bb_visitor_aliased",this.ALIASED_COUNT_KEY="bb_visitor_aliased_count",this.LAST_SENT_NEW_SESSION="last_sent_new_session",this.HUBSPOT_ID_SENT="hubspot_id_sent",this.FACEBOOK_ID_SENT="fb_id_sent",this.FACEBOOK_PERSON_ID_COOKIE="_fbp",this.FACEBOOK_CLICK_ID_COOKIE="_fbc",BigBrainJQueryPolyfill.extend(s,t),this.slug=s.slug,"https://bigbrain.me"===(u=t.bigbrain_url)||"https://data.bigbrain.me"===u||"//bigbrain.me"===u||"https://track.bigbrain.me/prod"===u||"//track.bigbrain.me/prod"===u||"//data.bigbrain.me"===u?(this.bigbrain_track_url="https://ei.monday.com/prod",this.bigbrain_visitors_url="https://vi.monday.com"):"https://tiles.io"===(p=t.bigbrain_url)||"//tiles.io"===p||"https://track.tiles.io/staging"===p||"//track.tiles.io/staging"===p||"https://track.bigbrainstaging.me/stage"===p||"//track.bigbrainstaging.me/stage"===p||"tiles.io/staging"===p?(this.bigbrain_track_url="https://ei.mondaystaging.com/stage",this.bigbrain_visitors_url="https://vi.mondaystaging.com"):(this.bigbrain_track_url=s.bigbrain_url,this.bigbrain_visitors_url=s.bigbrain_url),this.sending=!1,this.cookie_expire=3650,this.sync_interval=s.sync_interval,this.batch_size=s.batch_size,this.get_visitor_id_timeout=s.get_visitor_id_timeout,this.alias_timeout=s.alias_timeout,this.methods_interval=s.methods_interval,this.session_id=s.session_id,this.aliased=null!==this._get_cookie(this.ALIASED_KEY),i=this._get_cookie(this.ALIASED_COUNT_KEY),this.aliased_count=null===i?0:parseInt(i),this.create_visitor=s.create_visitor,this.cookies_enabled=s.cookies_enabled,this.visitor_id=null,this.experiment_visitor_id=null,this.pulse_user_id=s.pulse_user_id||null,this.pulse_account_id=s.pulse_account_id||null,this.local_storage_supported=this._is_local_storage_supported(),this.local_storage_supported?this.storage=window.localStorage:this.storage=new window.memoryStorage,this.events_queue=new window.queue("_event_tracker_queue",this.storage),this.ip_info_token="84d1f9f65b9a10",this.vistior_ip=null,this.visitor_loc=null,this.visitor_org=null,this.visitor_city=null,this.visitor_region=null,this.visitor_country=null,this.visitor_postal=null,this.started_plan_at=s.started_plan_at||null,this.user_created_at=s.user_created_at||null,this.account_created_at=s.account_created_at||null,this.plan_id=s.plan_id||null,this.pulse_user_serial_number=s.pulse_user_serial_number||null,this.source=s.source||null,this.is_mobile_app=s.is_mobile_app||!1,this.is_mobile_app&&(this._is_iOS_device()?this.source="mobile_app_iphone":this._is_android_device()?this.source="mobile_app_android":this.source="mobile_app_unknown"),this.is_tracker_cross_domain=t.is_tracker_cross_domain||s.is_tracker_cross_domain,this.emit_visitor_id=t.emit_visitor_id||s.emit_visitor_id,this.emit_target_origin=t.emit_target_origin||s.emit_target_origin,this._init_propeties(),this._get_ip_info_from_cookies(),this._init_ids(),this.send_immediately=!1,_=this._get_initial_queue(),n=0,a=_.length;n<a;n++)e=_[n],this._execute.apply(this,e);return this.send_immediately=s.send_immediately,this.local_storage_supported||(this.send_immediately=!0,this.track("local_storage_not_supported")),this.cookies_enabled&&(this._send_hubspot_id(),this._send_facebook_id()),this._work(),this._execute}catch(t){return r=t,this._log(r),function(){}}}return t.prototype._execute=function(){var t,i,e;try{if(0===arguments.length||"_"===arguments[0].charAt(0))return;return null==this[arguments[0]]?void this._log("unsupported action: "+arguments[0]):(i=Array.prototype.slice.call(arguments),t=i.shift(),this[t].apply(null,i))}catch(t){return e=t,this._log(e)}},t.prototype._send_facebook_id=function(){var t,i,e;try{if(null!=this._get_cookie(this.FACEBOOK_ID_SENT))return;return t=200,e=setInterval(function(i){return function(){var r,s;s=i._get_cookie(i.FACEBOOK_PERSON_ID_COOKIE),r=i._get_cookie(i.FACEBOOK_CLICK_ID_COOKIE),null!=s&&(i.track("facebook_id_tracking",{info1:s,info2:r,info3:t}),i._update_visitor_person_id(s,r),i._set_cookie(i.FACEBOOK_ID_SENT,!0),clearInterval(e)),0===--t&&clearInterval(e)}}(this),1e3)}catch(t){return i=t,this._log(i)}},t.prototype._send_hubspot_id=function(){var t,i,e;try{if(null!=this._get_cookie(this.HUBSPOT_ID_SENT))return;return t=100,e=setInterval(function(i){return function(){var r;r=i._get_cookie("hubspotutk"),null!=r&&(i.track("hubspot_tracking",{info1:r}),i._set_cookie(i.HUBSPOT_ID_SENT,!0),clearInterval(e)),0===--t&&clearInterval(e)}}(this),500)}catch(t){return i=t,this._log(i)}},t.prototype._emit_visitor_id=function(){if(this.emit_visitor_id)try{return window.parent.postMessage({type:"bb_tracker_message",bb_visitor_id:this.visitor_id},this.emit_target_origin.toString())}catch(t){return t,null}},t.prototype._init_ids=function(){null===this.visitor_id&&(this.visitor_id=this._get_cookie(this.VISITOR_ID_KEY),null!==this.visitor_id&&(this._fire_tag_manager_visitor_ready(),this._emit_visitor_id())),this._has_no_visitor_id()&&this.create_visitor&&this.cookies_enabled?(this.experiment_visitor_id=this._get_cookie(this.EXPERIMENT_VISITOR_ID_KEY),this._get_visitor_id()):null!==this.visitor_id&&null!==this.pulse_user_id&&this.aliased_count<2&&this.cookies_enabled&&this._alias()},t.prototype.send_all=function(){var t;try{if(this.sending||this._has_no_ids())return;this._send(this.events_queue.get_elements())}catch(i){return t=i,this._log(t)}},t.prototype._send=function(t){var i,e,r,s,_,o;if(!this._has_no_ids()&&0!==t.length&&!this.sending){for(o=[],_=[],e=0,r=t.length;e<r&&(i=t[e],!(_.length>=this.batch_size));e++)s=i.uuid,n.call(o,s)<0&&(o.push(i.uuid),i.seconds_since_happened=parseInt((new Date).getTime()/1e3)-i.timestamp,null!=i.pulse_account_id&&""!==i.pulse_account_id||(i.pulse_account_id=this.pulse_account_id),null!=i.pulse_user_id&&""!==i.pulse_user_id||(i.pulse_user_id=this.pulse_user_id),null!=i.visitor_id&&""!==i.visitor_id||(i.visitor_id=this.visitor_id),null!=i.source&&""!==i.source||(i.source=this.source),_.push(i));this.sending=!0;try{BigBrainJQueryPolyfill.ajax(this.bigbrain_track_url+"/event",{type:"POST",data:JSON.stringify(_),contentType:"application/json",dataType:"json",success:function(t){return function(){t._remove_sent_events_from_queue(o),t.sending=!1,t.send_immediately&&t.send_all()}}(this),complete:function(t){return function(){t.sending=!1,setTimeout(t._work,t.sync_interval)}}(this)})}catch(t){t,this.sending=!1,setTimeout(this._work,this.sync_interval)}}},t.prototype._process_data=function(t,i){i.name=t,null==i.timestamp&&(i.timestamp=parseInt((new Date).getTime()/1e3)),i.uuid=window.BB_UUID(),this._add_fullStory_to_data_properties(),this._raise_js_event(t,i)},t.prototype.track_many=function(t){var i,e,r,s,_,o;for(i=[],s=0,_=t.length;s<_;s++)o=t[s],r=o[0],e=o[1],this._skip_event(r)||(this._process_data(r,e),i.push(this._merge_event_params(e)));i.length>0&&this.events_queue.queue_batch(i),this.send_immediately&&this.send_all()},t.prototype.track=function(t,i){null==i&&(i={}),this._skip_event(t)||(this._process_data(t,i),this.events_queue.queue(this._merge_event_params(i)),this.send_immediately&&this.send_all())},t.prototype._raise_js_event=function(t,i){null==i&&(i={});try{window.dispatchEvent(new CustomEvent("bigbrain-track-event",{detail:{name:t,data:i}}))}catch(t){t}},t.prototype._skip_event=function(t){var i,e;return"new_session"===t&&(i=this.storage.getItem(this.LAST_SENT_NEW_SESSION),e=parseInt((new Date).getTime()/1e3),this.storage.setItem(this.LAST_SENT_NEW_SESSION,e),null!=i&&e-parseInt(i)<1800)},t.prototype._work=function(){var t;try{if(this.sending)return;this.events_queue.get_elements().length>0?this.send_all():setTimeout(this._work,this.sync_interval)}catch(i){t=i,this._log(t)}},t.prototype._remove_sent_events_from_queue=function(t){var i,e,r,s,_,o;for(e=this.events_queue.dequeue_all(),_=[],r=0,s=e.length;r<s;r++)i=e[r],o=i.uuid,n.call(t,o)<0&&_.push(i);if(_.length>0)return this.events_queue.queue_batch(_)},t.prototype._get_initial_queue=function(){return null!=window.BigBrainQ&&window.BigBrainQ.length>0?window.BigBrainQ:[]},t.prototype._get_timezone_offset=function(){try{return(new Date).getTimezoneOffset()/60*-1}catch(t){return t,null}},t.prototype._get_nav_type=function(){try{return performance.navigation.type}catch(t){return t,null}},t.prototype._get_ip_info_from_cookies=function(){if(this.visitor_ip=this._get_cookie("xi_ip"),this.visitor_loc=this._get_cookie("xi_loc"),this.visitor_org=this._get_cookie("xi_org"),this.visitor_city=this._get_cookie("xi_city"),this.visitor_region=this._get_cookie("xi_region"),this.visitor_country=this._get_cookie("xi_country"),this.visitor_postal=this._get_cookie("xi_postal"),this.time_diff=(new Date).getTimezoneOffset()/60*-1,this.time_diff>0)return this.time_diff="+"+this.time_diff},t.prototype._get_ip_info=function(){if(!this.visitor_country&&!this.visitor_ip&&this.cookies_enabled)return BigBrainJQueryPolyfill.get("https://ipinfo.io/json?token="+this.ip_info_token,function(t){return function(i){t.visitor_ip=i.ip,t.visitor_loc=i.loc,t.visitor_org=i.org,t.visitor_city=i.city,t.visitor_region=i.region,t.visitor_country=i.country,t.visitor_postal=i.postal,t.time_diff=(new Date).getTimezoneOffset()/60*-1,t.time_diff>0&&(t.time_diff="+"+t.time_diff),t._set_cookie("xi_time_diff",t.time_diff),t._set_cookie("xi_ip",t.visitor_ip),t._set_cookie("xi_loc",t.visitor_loc),t._set_cookie("xi_org",t.visitor_org),t._set_cookie("xi_city",t.visitor_city),t._set_cookie("xi_region",t.visitor_region),t._set_cookie("xi_country",t.visitor_country),t._set_cookie("xi_postal",t.visitor_postal),null!==t.visitor_id&&t._update_visitor_ip_info()}}(this))},t.prototype._update_visitor_utm_cluster_id=function(t){return BigBrainJQueryPolyfill.ajax(this.bigbrain_visitors_url+"/api/update",{type:"PUT",data:JSON.stringify({visitor_id:this.visitor_id,utm_cluster_id:t}),contentType:"application/json",dataType:"json",success:function(){return function(){}}()})},t.prototype._update_visitor_utm_locale_id=function(t){return BigBrainJQueryPolyfill.ajax(this.bigbrain_visitors_url+"/api/update",{type:"PUT",data:JSON.stringify({visitor_id:this.visitor_id,utm_locale_id:t}),contentType:"application/json",dataType:"json",success:function(){return function(){}}()})},t.prototype._update_visitor_person_id=function(t,i){var e;return e={person_id:t},null!=i&&(e.click_id=i),BigBrainJQueryPolyfill.ajax(this.bigbrain_visitors_url+"/api/update",{type:"PUT",data:JSON.stringify({visitor_id:this.visitor_id,data:e}),contentType:"application/json",dataType:"json",success:function(){return function(){}}()})},t.prototype._update_visitor_ip_info=function(){return BigBrainJQueryPolyfill.ajax(this.bigbrain_visitors_url+"/api/update",{type:"PUT",data:JSON.stringify({visitor_id:this.visitor_id,xi_ip:this.visitor_ip,xi_loc:this.visitor_loc,xi_org:this.visitor_org,xi_city:this.visitor_city,xi_region:this.visitor_region,xi_country:this.visitor_country,xi_time_diff:this.time_diff,xi_postal:this.visitor_postal}),contentType:"application/json",dataType:"json",success:function(t){return function(){t.updated_visitor_ip_info=!0}}(this)})},t.prototype._set_cookie=function(t,i){this.cookies_enabled&&(this.is_tracker_cross_domain?window.bb_cookie.set(t,i,this.cookie_expire,!1,!0):window.bb_cookie.set(t,i,this.cookie_expire,!0))},t.prototype._get_cookie=function(t){var i;return i=window.bb_cookie.get(t),null==i?null:i},t.prototype._get_visitor_id=function(){if(this._has_no_visitor_id())return BigBrainJQueryPolyfill.ajax(this.bigbrain_visitors_url+"/api/create",{type:"POST",data:JSON.stringify({screen_height:this.properties.screen_height,screen_width:this.properties.screen_width,os:this.properties.os,device:this.properties.device,browser:this.properties.browser,source:this.source,marketing_campaign:this.properties.marketing_campaign,marketing_adgroup:this.properties.marketing_adgroup,marketing_campaign_id:this.properties.marketing_campaign_id,marketing_sub_id:this.properties.marketing_sub_id,marketing_source:this.properties.marketing_source,marketing_banner:this.properties.marketing_banner,marketing_medium:this.properties.marketing_medium,marketing_content:this.properties.marketing_content,marketing_retargeting:this.properties.marketing_retargeting,marketing_retargeting_id:this.properties.marketing_retargeting_id,marketing_referrer:this.properties.marketing_referrer,marketing_vertical:this.properties.marketing_vertical,marketing_landing_page:this.properties.marketing_landing_page,marketing_language:this.properties.marketing_language,aw_keyword:this.properties.aw_keyword,budget_type:this.properties.budget_type,gcl_id:this.properties.gcl_id,experiment_id:this.properties.experiment_id,os_version:this.properties.os_version,device_name:this.properties.device_name,browser_version:this.properties.browser_version,manufacturer:this.properties.manufacturer,is_wifi:this.properties.is_wifi,app_build:this.properties.app_build,app_version:this.properties.app_version,device_id:this.properties.device_id,nav_type:this.properties.nav_type,xi_ip:this.visitor_ip,xi_loc:this.visitor_loc,xi_org:this.visitor_org,xi_city:this.visitor_city,xi_region:this.visitor_region,xi_country:this.visitor_country,xi_time_diff:this.time_diff,xi_postal:this.visitor_postal,experiment_visitor_id:this.experiment_visitor_id,data:this.properties.data}),contentType:"application/json",dataType:"json",success:function(t){return function(i){t.visitor_id=i.visitor_id||null,t._set_cookie(t.VISITOR_ID_KEY,t.visitor_id),t._fire_tag_manager_visitor_ready(),t._fire_new_visit_event(),t.send_all(),t._get_ip_info(),null!==t.visitor_id&&null!==t.pulse_user_id&&t._alias(),t._emit_visitor_id()}}(this),error:function(t){return function(){setTimeout(t._get_visitor_id,t.get_visitor_id_timeout)}}(this)})},t.prototype._has_no_ids=function(){return null===this.visitor_id&&null===this.pulse_user_id},t.prototype._has_no_visitor_id=function(){return null===this.visitor_id},t.prototype._fire_tag_manager_visitor_ready=function(){return window.dataLayer=window.dataLayer||[],window.dataLayer.push({bbVisitorId:this.visitor_id}),window.dataLayer.push({event:"bbTrackerVisitorReady"})},t.prototype._fire_new_visit_event=function(){return this.track("bb_new_device",{data:{screen_width:this.properties.screen_width,screen_height:this.properties.screen_height}})},t.prototype.set_account_id=function(t){return this.pulse_account_id=t},t.prototype.set_user_id=function(t){this.pulse_user_id=t,null!==this.pulse_user_id&&(null!==this.visitor_id?!1===this.aliased&&this._alias():setTimeout(function(){return this.set_user_id(t)}.bind(this),this.methods_interval))},t.prototype.set_utm_cluster_id=function(t){null!==this.visitor_id?this._update_visitor_utm_cluster_id(t):setTimeout(function(){return this.set_utm_cluster_id(t)}.bind(this),this.methods_interval)},t.prototype.set_utm_locale_id=function(t){null!==this.visitor_id?this._update_visitor_utm_locale_id(t):setTimeout(function(){return this.set_utm_locale_id(t)}.bind(this),this.methods_interval)},t.prototype.set_property=function(t,i){return this.properties[t]=i},t.prototype._alias=function(){if(this.cookies_enabled)return BigBrainJQueryPolyfill.ajax(this.bigbrain_visitors_url+"/api/link_visitor_to_user",{type:"POST",data:JSON.stringify({visitor:{visitor_id:this.visitor_id,pulse_user_id:this.pulse_user_id}}),contentType:"application/json",dataType:"json",success:function(t){return function(){t.aliased=!0,t._set_cookie(t.ALIASED_KEY,!0),t.aliased_count+=1,t._set_cookie(t.ALIASED_COUNT_KEY,t.aliased_count)}}(this),error:function(t){return function(){setTimeout(t._alias,t.alias_timeout)}}(this)})},t.prototype._init_propeties=function(){var t,i,e,r,s;this.properties={},this.properties.os_language=navigator.language,this.properties.user_agent=navigator.userAgent,this.properties.browser=this._browser(navigator.userAgent,navigator.vendor,window.opera),this.properties.browser_version=this._browser_version(navigator.userAgent,navigator.vendor,window.opera),this.properties.os=this._operating_system(),this.properties.device=this._device(),this.properties.screen_height=screen.height,this.properties.screen_width=screen.width,this.properties.gcl_id=this._get_query_param(document.URL,"gclid"),this.properties.marketing_referrer=this._get_referrer(),this.properties.marketing_banner=this._get_query_param(document.URL,"utm_banner")||this._get_query_param(document.URL,"marketing_banner"),this.properties.marketing_source=this._get_query_param(document.URL,"utm_source")||this._get_query_param(document.URL,"marketing_source"),this.properties.marketing_medium=this._get_query_param(document.URL,"utm_medium")||this._get_query_param(document.URL,"marketing_medium"),this.properties.marketing_vertical=this._get_query_param(document.URL,"utm_vertical")||this._get_query_param(document.URL,"marketing_vertical"),this.properties.marketing_content=this._get_query_param(document.URL,"utm_content")||this._get_query_param(document.URL,"marketing_content"),this.properties.marketing_campaign=this._get_query_param(document.URL,"utm_campaign")||this._get_query_param(document.URL,"marketing_campaign"),this.properties.marketing_adgroup=this._get_query_param(document.URL,"utm_adgroup")||this._get_query_param(document.URL,"marketing_adgroup"),this.properties.marketing_retargeting=this._get_query_param(document.URL,"utm_retargeting")||this._get_query_param(document.URL,"marketing_retargeting"),this.properties.marketing_language=this._get_query_param(document.URL,"utm_language")||this._get_query_param(document.URL,"marketing_language"),this.properties.marketing_sub_id=this._get_query_param(document.URL,"utm_sub_id")||this._get_query_param(document.URL,"marketing_sub_id"),this.properties.budget_type=this._get_query_param(document.URL,"utm_bdg")||this._get_query_param(document.URL,"marketing_bdg"),this.properties.experiment_id=this._get_experiment_id(),this.properties.tz_offset=this._get_timezone_offset(),this.properties.nav_type=this._get_nav_type(),this.properties.info3=this._get_brand(),this.properties.session_id=this.session_id,r=this._get_query_param(document.URL,"utm_keyword")||this._get_query_param(document.URL,"marketing_keyword"),this.properties.aw_keyword=r,this._add_to_properties_data("keyword",r),i=this._get_query_param(document.URL,"fbclid")||this._get_cookie(this.FACEBOOK_CLICK_ID_COOKIE)||this._get_query_param(document.URL,"gclid"),this._add_to_properties_data("click_id",i),s=this._get_cookie(this.FACEBOOK_PERSON_ID_COOKIE),this._add_to_properties_data("person_id",s),null!==this.properties.marketing_campaign&&""!==this.properties.marketing_campaign||null==this.properties.marketing_retargeting||(this.properties.marketing_campaign=this.properties.marketing_retargeting),t=this._get_query_param(document.URL,"utm_campaign_id"),null!=t&&(this.properties.marketing_campaign_id=t,null!=this.properties.marketing_retargeting&&(this.properties.marketing_retargeting_id=t)),window.location.origin||(window.location.origin=window.location.protocol+"//"+window.location.hostname+(window.location.port?":"+window.location.port:"")),this.properties.marketing_landing_page=window.location.origin+window.location.pathname,this._init_mobile_app_properties();for(e in this.properties)null!=this.properties[e]&&""!==this.properties[e]||delete this.properties[e]},t.prototype._get_experiment_id=function(){var t;try{if(t=this._get_query_param(document.URL,"utm_expid"))return t.split(".")[1]}catch(t){t}return null},t.prototype._get_referrer=function(){return this._get_query_param(document.URL,"utm_referrer")||(this._includes(document.URL,"utm_expid")?"":document.referrer)},t.prototype._init_mobile_app_properties=function(){var t;try{window.Android&&(window.bb_mobile_properties=JSON.parse(Android.getMobileProperties()))}catch(i){t=i,this._log(t)}if(window.bb_mobile_properties)return this.properties.manufacturer=window.bb_mobile_properties.manufacturer||null,this.properties.app_build=window.bb_mobile_properties.app_build||null,this.properties.app_version=window.bb_mobile_properties.app_version||null,this.properties.device_name=window.bb_mobile_properties.device_name||null,this.properties.os_version=window.bb_mobile_properties.os_version||null,this.properties.is_wifi=window.bb_mobile_properties.is_wifi||null,this.properties.connection_type=window.bb_mobile_properties.connection_type||null,null!=window.bb_mobile_properties.os&&(this.properties.os=window.bb_mobile_properties.os),null!=window.bb_mobile_properties.source&&(this.properties.source=window.bb_mobile_properties.source),null!=window.bb_mobile_properties.device&&(this.properties.device=window.bb_mobile_properties.device),null!=window.bb_mobile_properties.screen_width&&(this.properties.screen_width=window.bb_mobile_properties.screen_width),null!=window.bb_mobile_properties.screen_height&&(this.properties.screen_height=window.bb_mobile_properties.screen_height),null!=window.bb_mobile_properties.device_id&&(this.properties.device_id=window.bb_mobile_properties.device_id),null!=window.bb_mobile_properties.visitor_id&&(this.visitor_id=window.bb_mobile_properties.visitor_id),null!=window.bb_mobile_properties.pulse_user_id&&(this.pulse_user_id=window.bb_mobile_properties.pulse_user_id),null!=window.bb_mobile_properties.pulse_account_id&&(this.pulse_account_id=window.bb_mobile_properties.pulse_account_id),null!=window.bb_mobile_properties.user_created_at&&(this.user_created_at=window.bb_mobile_properties.user_created_at),null!=window.bb_mobile_properties.account_created_at&&(this.account_created_at=window.bb_mobile_properties.account_created_at),null!=window.bb_mobile_properties.plan_id&&(this.plan_id=window.bb_mobile_properties.plan_id),null!=window.bb_mobile_properties.pulse_user_serial_number&&(this.pulse_user_serial_number=window.bb_mobile_properties.pulse_user_serial_number),this.is_mobile_app=!0},t.prototype._tracker_state=function(){var t;try{return t=this.events_queue.get_elements(),{queueLength:t.length,queueSize:this._memorySizeOf(t),isSending:this.sending}}catch(t){return{}}},t.prototype._log=function(t){var i;try{i=this._tracker_state(),console.error("BigBrainTracker:",t,i),window.Honeybadger&&Honeybadger.notify(t,{context:{BigBrainTrackerState:i}})}catch(t){}},t.prototype._merge_event_params=function(t){var i,e,r,s,_;_={},null!=this.pulse_account_id&&(_.pulse_account_id=this.pulse_account_id),null!=this.pulse_user_id&&(_.pulse_user_id=this.pulse_user_id),null!=this.visitor_id&&(_.visitor_id=this.visitor_id),null!=this.started_plan_at&&(_.started_plan_at=this.started_plan_at),null!=this.user_created_at&&(_.user_created_at=this.user_created_at),null!=this.account_created_at&&(_.account_created_at=this.account_created_at),null!=this.plan_id&&(_.plan_id=this.plan_id),null!=this.pulse_user_serial_number&&(_.pulse_user_serial_number=this.pulse_user_serial_number),null!=this.source&&(_.source=this.source),BigBrainJQueryPolyfill.extend(_,this.properties),BigBrainJQueryPolyfill.extend(_,t),s="object"==typeof this.properties.data&&null!==this.properties.data,i="object"==typeof t.data&&null!==t.data,s&&i&&(r=BigBrainJQueryPolyfill.extend({},this.properties.data),r=BigBrainJQueryPolyfill.extend(r,t.data),_.data=r);for(e in _)null!=_[e]&&""!==_[e]||delete _[e];return _},t.prototype._get_query_param=function(t,i){var e,r,s;try{return i=i.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]"),r="[\\?&]"+i+"=([^&#]*)",e=new RegExp(r),s=e.exec(t),null===s||s&&"string"!=typeof s[1]&&s[1].length?null:decodeURIComponent(s[1]).replace(/\+/g," ")}catch(t){return null}},t.prototype._device=function(){var t;try{return t=navigator.userAgent,/Windows Phone/i.test(t)||/WPDesktop/.test(t)?"windows phone":/iPad/.test(t)?"tablet":/iPod/.test(t)?"ipod touch":/iPhone/.test(t)?"mobile":/(BlackBerry|PlayBook|BB10)/i.test(t)?"blackberry":/Android/.test(t)?"mobile":/Mac/i.test(t)&&navigator.maxTouchPoints&&navigator.maxTouchPoints>2?"tablet":/Quest/i.test(t)?"oculus":"desktop"}catch(t){return null}},t.prototype._operating_system=function(){var t;try{return t=navigator.userAgent,/Windows/i.test(t)?/Phone/.test(t)||/WPDesktop/.test(t)?"Windows Phone":"windows":/(iPhone|iPad|iPod)/.test(t)?"ios":/Android/.test(t)?"android":/(BlackBerry|PlayBook|BB10)/i.test(t)?"blackberry":/Mac/i.test(t)?"mac":/Linux/.test(t)?"linux":""}catch(t){return null}},t.prototype._browser=function(t,i,e){try{return i=i||"",e||this._includes(t," OPR/")?this._includes(t,"Mini")?"Opera Mini":"opera":/(BlackBerry|PlayBook|BB10)/i.test(t)?"blackberry":this._includes(t,"IEMobile")||this._includes(t,"WPDesktop")?"internet explorer mobile":this._includes(t,"Edge")?"microsoft edge":this._includes(t,"FBIOS")?"facebook mobile":this._includes(t,"Chrome")?"chrome":this._includes(t,"CriOS")?"chrome ios":this._includes(i,"Apple")?this._includes(t,"Mobile")?"Mobile Safari":"safari":this._includes(t,"Android")?"android":this._includes(t,"Konqueror")?"konqueror":this._includes(t,"Firefox")?"firefox":this._includes(t,"MSIE")||this._includes(t,"Trident/")?"internet explorer":this._includes(t,"Gecko")?"mozilla":""}catch(t){return null}},t.prototype._browser_version=function(t,i,e){var r,s,_,o;try{return r=this._browser(t,i,e),(o={"internet explorer mobile":/rv:(\d+(\.\d+)?)/,"microsoft edge":/Edge\/(\d+(\.\d+)?)/,chrome:/Chrome\/(\d+(\.\d+)?)/,"chrome ios":/Chrome\/(\d+(\.\d+)?)/,safari:/Version\/(\d+(\.\d+)?)/,"mobile safari":/Version\/(\d+(\.\d+)?)/,opera:/(Opera|OPR)\/(\d+(\.\d+)?)/,firefox:/Firefox\/(\d+(\.\d+)?)/,konqueror:/Konqueror:(\d+(\.\d+)?)/,blackberry:/BlackBerry (\d+(\.\d+)?)/,android:/android\s(\d+(\.\d+)?)/,"internet explorer":/(rv:|MSIE )(\d+(\.\d+)?)/,mozilla:/rv:(\d+(\.\d+)?)/},
(_=o[r])===undefined)?null:(s=t.match(_),s?parseFloat(s[s.length-2]):null)}catch(t){return null}},t.prototype._is_android_device=function(){var t;try{return t=navigator.userAgent.toLowerCase(),!!t.match(/(android)/)}catch(t){return null}},t.prototype._is_iOS_device=function(){var t;try{return t=navigator.userAgent.toLowerCase(),!!t.match(/(iphone|ipod|ipad)/)}catch(t){return null}},t.prototype._get_brand=function(){return/https:\/\/.*monday.com.*/i.test(window.location.href)?"monday":"dapulse"},t.prototype._is_spider=function(){return!!/(google web preview|Page Speed Insights|baiduspider|yandexbot|YandexMobileBot|Pingdom|smtbot|bingbot|pingbot|adsbot|mediapartners|facebot|facebookexternalhit|ia_archiver|exabot|sogou|duckduckbot|googlebot|yahoo! slurp|DatadogSynthetics)/i.test(navigator.userAgent)},t.prototype._includes=function(t,i){return-1!==t.indexOf(i)},t.prototype._memorySizeOf=function(t){var i,e;return i=0,e=function(t){var r,s;if(null!==t&&void 0!==t)switch(typeof t){case"number":i+=8;break;case"string":i+=2*t.length;break;case"boolean":i+=4;break;case"object":if("Object"===(s=Object.prototype.toString.call(t).slice(8,-1))||"Array"===s)for(r in t)t.hasOwnProperty(r)&&e(t[r]);else i+=2*t.toString().length}return i},function(t){return t<1024?t+" bytes":t<1048576?(t/1024).toFixed(3)+" KiB":t<1073741824?(t/1048576).toFixed(3)+" MiB":(t/1073741824).toFixed(3)+" GiB"}(e(t))},t.prototype._is_local_storage_supported=function(){try{return window.localStorage.setItem("bb_localstorage_test","test"),window.localStorage.removeItem("bb_localstorage_test"),!0}catch(t){return t,this._log("local storage not supported"),!1}},t.prototype._is_selected_for_gradual_release=function(){return s.gradual_release&&!Math.floor(Math.random()*s.gradual_release_distribution)},t.prototype._has_slug=function(){return!!s.slug},t.prototype._add_to_properties_data=function(t,i){if(this.properties&&i&&t)return this.properties.data=this.properties.data||{},this.properties.data[t]=i},t.prototype._add_fullStory_to_data_properties=function(){var t,i,e;try{if(e=window.FSSessionUrl||null,i=window.FSSessionStartedAt||null,null!==e)return this._add_to_properties_data("fs_session_url",e),this._add_to_properties_data("fs_session_started_at",i),!0}catch(i){return t=i,this._log(t),!1}},t}(),window.BigBrainTracker=t}).call(this);
